{"version":3,"file":"js/445.5fb5f586.js","mappings":"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","sources":["webpack://week03/./src/stores/admin/adminStore.js","webpack://week03/./src/stores/statusStore.js","webpack://week03/./src/components/admin/LoginComponent.vue","webpack://week03/./src/stores/admin/loginStore.js","webpack://week03/./src/components/admin/LoginComponent.vue?8a02"],"sourcesContent":["import { defineStore } from \"pinia\";\n\n// 匯入statusStore\nimport statusStore from '@/stores/statusStore';\n\nexport default defineStore('adminStore', {\n  state: () => ({\n    checkResult: null,\n    // 遠端取得的products資料\n    tempProducts: [],\n    // api資料\n    api: {\n      url: 'https://vue3-course-api.hexschool.io/v2',\n      path: 'vue2022ron',\n    },\n    // 新增產品資料\n    tempData: {},\n    // 所有產品分類\n    AllCategory: [''],\n    // 模式新增'add'或修改'edit'\n    operateMode: '',\n    pagination: {},\n    // 分類選單Dom\n    selectEl: null, \n    // 上傳檔案input Dom\n    uploadEl: null, \n  }),\n  getters: {\n  },\n  actions: {\n    // 取得所有產品分類\n    getAllCategory() {\n      this.axios.get(`${this.api.url}/api/${this.api.path}/admin/products/all`)\n        .then(res => {\n          // 取得所有商品物件資料\n          const allProducts = res.data.products\n          // 取得所有商品物件屬性\n          const allAttr = Object.keys(allProducts);\n          // 所有商品物件屬性，進行forEach\n          allAttr.forEach(value => {\n            let repeatNum = 0;\n            // 陣列AllCategory進行forEach\n            this.AllCategory.forEach(item => {\n              // 陣列AllCategory的每個item，跟allProducts[value].category做比對\n              item === allProducts[value].category ? repeatNum ++ : repeatNum += 0;\n            });\n            // 如果都沒有相同的，就把allProducts[value].category『push』到所有產品分類AllCategory\n            repeatNum === 0 ? this.AllCategory.push(allProducts[value].category) : '';\n          });\n        })\n        .catch(err => {\n          const status = statusStore(); // 建立statusStore實體\n          const { message } = err.response.data;\n          status.swAlert('center', 'error', message, false, false);\n        });\n    },\n    // 改變分類取得商品資料\n    selectOnChange(e) {\n      // change行為得到select的值，代入\n      this.getProducts(e.target.value);\n    },\n    // 取得全部商品\n    getProducts(category = '') {\n      this.axios.get(`${this.api.url}/api/${this.api.path}/admin/products/?category=${category}`)\n        .then(res => {\n          // 取得對應分類選單的產品資料、分頁資料\n          this.tempProducts = res.data.products;\n          this.pagination = res.data.pagination;\n        })\n        .catch(err => {\n          const status = statusStore(); // 建立statusStore實體\n          const { message } = err.response.data;\n          status.swAlert('center', 'error', message, false, false);\n        });\n    },\n    // 驗證登入\n    checkStatus() {\n      (async () => {\n        // 從cookie取得token\n        const token = document.cookie.replace(/(?:(?:^|.*;\\s*)myToken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n        this.axios.defaults.headers.common[\"Authorization\"] = token;\n        try {\n          // 驗證登入狀態\n          const res1 = await this.axios.post(`${this.api.url}/api/user/check`)\n          // 取得驗證確認\n          this.checkResult = res1.data.success;\n          // 取得資料\n          this.getProducts();\n        } catch (error) {\n          const { message } = error.response.data;\n          const status = statusStore(); // 建立statusStore實體\n          await status.swAlert('center', 'error', message, false, false);\n          // 轉跳login頁面\n          this.router.push('/login');\n        }\n      })();\n    },\n    // 新增產品資料至遠端\n    add(tempData) {\n      (async () => {\n        const status = statusStore();\n        try {\n          // 新增商品內容\n          const res1 = await this.axios.post(`${this.api.url}/api/${this.api.path}/admin/product`, { data: tempData });\n          // 取得資料，代入category參數（根據分類選單的值）\n          this.getProducts(this.selectEl.value);\n          // 跳出狀態提示\n          status.swAlert('top-end', 'success', res1.data.message, false, true);\n        } catch (error) {\n          status.swAlert('top-end', 'error', error.response.data.message, false, true);\n        }\n      })();\n    },\n    // 更改產品遠端資料\n    put(id, putData) {\n      (async () => {\n        const status = statusStore(); // 建立statusStore實體\n        try {\n          // 修改商品內容\n          const res1 = await this.axios.put(`${this.api.url}/api/${this.api.path}/admin/product/${id}`, { data: putData });\n          // 取得資料，代入category參數（根據分類選單的值）\n          this.getProducts(this.selectEl.value);\n          // 跳出狀態提示\n          await status.swAlert('top-end', 'success', res1.data.message, false, true);\n        } catch (error) {\n          status.swAlert('top-end', 'error', error.response.data.message, false, true);\n        };\n      })();\n    },\n    // 上傳檔案\n    uploadFile() {\n      if (this.uploadEl.value === '') return;  \n      // 取得檔案格式資料\n      const file = this.uploadEl.files[0]; \n      // 用表單形式將檔案上傳\n      // 內建的FormData格式，用來產生表單格式，跟我們要上傳的表單格式是一致的\n      const formData = new FormData();\n      // 把file附加到FormData（new FormData() ）\n      formData.append('file-to-upload', file);\n      this.axios.post(`${this.api.url}/api/${this.api.path}/admin/upload`, formData)\n        .then(res => {\n          this.Swal.fire({\n            title: `上傳成功`,\n             // 加上html元素input、button\n            html: \n            `<input class=\"form-control imageUrl\" id=\"imageUrl\" type=\"text\" value=\"1234\">`,\n            didOpen: () => {\n              // 選取<input>元素，把上傳圖片後回傳的imageUrl，賦予給<input>value值\n              document.querySelector('.imageUrl').value = res.data.imageUrl;\n            },\n            // text: '',\n            icon: 'success',\n            showCancelButton: true,\n            confirmButtonColor: '#3085d6',\n            cancelButtonColor: '#d33',\n            confirmButtonText: '複製圖片位置 ',\n            cancelButtonText: '取消'\n          }).then((result) => {\n            // 點擊confirmButton按鈕，複製<input>的value值\n            if (result.isConfirmed) {\n              // 選取<input>元素\n              const input = document.querySelector('.imageUrl');\n              // 使用Clipboard API，複製<input>的value值\n              navigator.clipboard.writeText(input.value);\n               // 清除file input欄位檔案資料\n              this.uploadEl.value = '';\n            }\n          })\n        })\n        .catch(err => {\n          this.Swal.fire(\n            '上傳失敗',\n            err.message,\n            'error'\n          );\n        })\n    },\n    // 換頁\n    changePage(page) {\n      // 取得全部商品\n      this.axios.get(`${this.api.url}/api/${this.api.path}/admin/products/?page=${page}`)\n        .then(res => {\n          // 取得全部商品\n          this.tempProducts = res.data.products;\n          // 取得分頁資料\n          this.pagination = res.data.pagination;\n        })\n        .catch(err => {\n          const status = statusStore(); // 建立statusStore實體\n          status.swAlert('top-end', 'error', err.response.data, false, true);\n        })\n    },\n    // 變更啟用狀態\n    changeStatus(item) {\n      const { id } = item;\n      const itemData = { ...item };\n      // 更改產品is_enable的布林值\n      itemData.is_enabled = !itemData.is_enabled;\n      this.put(id, itemData);\n    },\n    // 確認產品\n    confirmProduct() {\n      const { id } = this.tempData;\n      if (this.operateMode === 'edit') {\n        this.put(id, this.tempData);\n      } else if (this.operateMode === 'add') {\n        this.add(this.tempData);\n      }\n    },\n    // 產品列表項目排序\n    itemSort(attr) {\n      this.tempProducts.sort((a, b) => {\n        return b[attr] - a[attr];\n      })\n    },\n  },\n});","import { defineStore } from \"pinia\";\n\n// 匯入adminStore\nimport adminStore from '@/stores/admin/adminStore';\n\nexport default defineStore('statusStore', {\n  state: () => ({\n    // api資料\n    api: {\n      url: 'https://vue3-course-api.hexschool.io/v2',\n      path: 'vue2022ron',\n    },\n  }),\n  getters: {\n  },\n  actions: {\n    // sweet Alert2套件\n    swAlert(pos, icon, title, showConfirmBtn, toast) {\n      // 用Promise base包起來，調用的時候加上await轉為同步\n      return new Promise((resolve, reject) => {\n        resolve(\n          this.Swal.fire({\n            position: pos,    // 出現位置\n            icon: icon,\n            title: title,\n            showConfirmButton: showConfirmBtn,\n            timer: 2500,  // 出現時間\n            toast: toast, // false: toast; true: alert\n          })\n        );\n      })\n    },\n    swDelect(product) {\n      this.Swal.fire({\n        title: `刪除產品『${product.title}』?`,\n        text: \"資料刪除後，將無法恢復！\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: '確認刪除',\n        cancelButtonText: '取消'\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.axios.delete(`${this.api.url}/api/${this.api.path}/admin/product/${product.id}`)\n            .then((res) => {\n              this.Swal.fire(\n                res.data.message,\n                '你的資料已被刪除',\n                'success'\n              );\n              const admin = adminStore();  // 建立adminStore實體\n              // 資料刪除後再重新取得產品資料(category代入分類選單的值)\n              this.axios.get(`${this.api.url}/api/${this.api.path}/admin/products/?category=${admin.selectEl.value}`)\n                .then(res => {\n                  // 取得對應分類選單的產品資料\n                  admin.tempProducts = res.data.products;\n                })\n                .catch(err => {\n                  this.swAlert('center', 'error', err.response.data.message, false, true);\n                })\n            })\n            .catch((err) => {\n              this.Swal.fire(\n                err.response.data.message,\n                '你的資料尚未被刪除',\n                'error'\n              );\n            });\n        }\n      })\n    },\n    // 登出\n    logout() {\n      this.Swal.fire({\n        title: `是否『登出』後台`,\n        text: '',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: '確認登出',\n        cancelButtonText: '取消'\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.axios.post(`${this.api.url}/logout`)\n            .then(res => {\n              this.Swal.fire(\n                res.data.message,\n                '',\n                'success'\n              ).then((result) => {\n                if (result.isConfirmed) {\n                  // 轉跳login頁面\n                  this.router.push('/login');\n                }\n              });\n            })\n            .catch(err => {\n              this.Swal.fire(\n                err.response.data.message,\n                '',\n                'error'\n              );\n            });\n        }\n      })\n    },\n  },\n});","<template>\n  <div class=\"container\">\n      <div class=\"row vh-100 d-flex flex-column align-items-center\">\n        <div class=\"col-6 col-sm-6 col-md-4 col-lg-3 mt-auto mb-auto\">\n          <!-- 套用vee-VeeValidate -->\n          <v-form v-slot=\"{ errors }\" @submit=\"login.signin()\">\n            <h1 class=\"h3 mb-3 font-weight-normal text-center\">請先登入</h1>\n            <div class=\"form-floating mb-3\">\n              <v-field\n                type=\"email\"\n                name=\"email\"\n                class=\"form-control\"\n                id=\"account\"\n                :class=\"{ 'is-invalid': errors['email'], 'is-valid': login.adminData.username !== '' && !errors['email']}\"\n                placeholder=\"name@example.com\"\n                rules=\"email|required\"\n                v-model=\"login.adminData.username\"></v-field>\n              <label for=\"account\">Email address</label>\n              <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\n            </div>\n            <div class=\"form-floating\">\n              <v-field\n                type=\"password\"\n                name=\"password\"\n                class=\"form-control\"\n                id=\"password\"\n                :class=\"{ 'is-invalid': errors['password'], 'is-valid': login.adminData.password !== '' && !errors['password']}\"\n                placeholder=\"Password\"\n                :rules=\"login.isPassword\"\n                v-model=\"login.adminData.password\"></v-field>\n              <label for=\"password\">Password</label>\n              <error-message name=\"password\" class=\"invalid-feedback\"></error-message>\n            </div>\n            <button type=\"submit\" class=\"btn btn-lg btn-primary mt-3 w-100\">登入</button>\n          </v-form>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script>\n// 匯入loginStore\nimport loginStore from '@/stores/admin/loginStore';\n\nexport default {\n  setup() {\n    const login = loginStore();// 建立adminStore實體\n    return {\n      login,\n    };\n  },\n};\n</script>\n","import { defineStore } from \"pinia\";\n\n// 匯入statusStore\nimport statusStore from '@/stores/statusStore';\n\nexport default defineStore('loginStore', {\n  state: () => ({\n    adminData: {\n      username: '',\n      password: '',\n    },\n  }),\n  getters: {\n  },\n  actions: {\n    searchContacts(fn) {\n      fn();\n    },\n    test(attr) {\n      const obj = {\n        fn1: () => {\n          console.log('a');\n        },\n        fn2: () => {\n          console.log('b');\n        },\n      };\n      this.searchContacts(obj[attr]);      \n    },\n    // 登入\n    signin() {\n      const api = {\n        url: 'https://vue3-course-api.hexschool.io/v2',\n        path: 'vue2022ron',\n      };\n      const status = statusStore(); // 建立statusStore實體\n      const { swAlert } = status; // 把statusStore actions方法解構\n      if (this.adminData.username === undefined || this.adminData.password === undefined) return;\n      (async () => {\n        try {\n          const res1 = await this.axios.post(`${api.url}/admin/signin`, this.adminData);\n          this.cleanInputValue();\n          const { expired, message, token } = res1.data;\n          // 把token、expired存入cookie\n          document.cookie = `myToken = ${token}; expires = ${new Date(expired)};`;\n          // 跳出狀態提示（加await轉為同步行為，已改為promise base）\n          await swAlert('center', 'success', message, false, false);\n          // 轉跳admin頁面\n          // this.router.push('/admin/products');\n          // 轉跳第五週作業\n          this.router.push('/week05');\n        } catch (err) {\n          const { message } = err.response.data;\n          this.cleanInputValue();\n          // 跳出狀態提示\n          swAlert('center', 'error', message, false, false);\n        }\n      })();\n    },\n    // 清除輸入欄\n    cleanInputValue() {\n      this.adminData.username = '';\n      this.adminData.password = '';\n    },\n    // VeeValidate表單驗證rules\n    isPassword(value) {\n      // ^[a-zA-Z]：開頭為字母\n      // \\w：任何數字字元字母底線，等於[A-Za-z0-9_]\n      // {8}$：長度9個字元之間\n      const pwdRule = /^[a-zA-Z]\\w{8}$/;\n      return pwdRule.test(value) ? true : '密碼為字母開頭，長度9字元';\n    },\n  },\n});\n","import { render } from \"./LoginComponent.vue?vue&type=template&id=c2ff415c\"\nimport script from \"./LoginComponent.vue?vue&type=script&lang=js\"\nexport * from \"./LoginComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/LONGSIAN/Desktop/Vue 2023直播班/week03/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["defineStore","state","checkResult","tempProducts","api","url","path","tempData","AllCategory","operateMode","pagination","selectEl","uploadEl","getters","actions","getAllCategory","this","axios","get","then","res","allProducts","data","products","allAttr","Object","keys","forEach","value","repeatNum","item","category","push","catch","err","status","statusStore","message","response","swAlert","selectOnChange","e","getProducts","target","checkStatus","token","document","cookie","replace","defaults","headers","common","res1","post","success","error","router","add","put","id","putData","uploadFile","file","files","formData","FormData","append","Swal","fire","title","html","didOpen","querySelector","imageUrl","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","isConfirmed","input","navigator","clipboard","writeText","changePage","page","changeStatus","itemData","is_enabled","confirmProduct","itemSort","attr","sort","a","b","pos","showConfirmBtn","toast","Promise","resolve","reject","position","showConfirmButton","timer","swDelect","product","text","delete","admin","adminStore","logout","class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_v_form","onSubmit","$setup","signin","errors","_hoisted_4","_hoisted_5","_component_v_field","name","adminData","username","placeholder","rules","_hoisted_6","_component_error_message","_hoisted_7","password","isPassword","_hoisted_8","_hoisted_9","searchContacts","fn","test","obj","fn1","console","log","fn2","undefined","cleanInputValue","expired","Date","pwdRule","setup","login","loginStore","__exports__","render"],"sourceRoot":""}