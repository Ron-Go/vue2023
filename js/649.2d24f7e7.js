"use strict";(self["webpackChunkweek03"]=self["webpackChunkweek03"]||[]).push([[649],{649:function(a,e,t){t.r(e),t.d(e,{default:function(){return Fa}});var l=t(3396),n=t(7139);const i={key:0,class:"container px-0"},o={class:"container mt-5"},s={class:"row"},d={class:"col-3 me-auto"},r={class:"d-flex align-items-center me-auto"},c=(0,l._)("label",{class:"form-label me-3 mb-0 w-25",for:"category"},"分類",-1),m=(0,l._)("option",{value:"",selected:"",disabled:""},"選擇分類",-1),p=["value"],u={class:"col-2 text-end"},b={class:"table table-hover mt-4"},_=(0,l._)("th",{width:"120"}," 分類 ",-1),g=(0,l._)("th",null,"產品名稱",-1),w=(0,l._)("th",{width:"120"}," 編輯 ",-1),f={width:"120"},y={width:"100"},h={class:"",width:"120"},v={class:"",width:"120"},D=["onClick"],k={class:"btn-group"},C=["onClick"],U=["onClick"];function x(a,e,t,x,M,V){const z=(0,l.up)("pagination-component"),H=(0,l.up)("product-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[x.admin.tempProducts.length&&x.admin.checkResult?((0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",o,[(0,l._)("div",s,[(0,l._)("div",d,[(0,l._)("div",r,[c,(0,l._)("select",{class:"form-select border selectEl",id:"category",onChange:e[0]||(e[0]=(...a)=>x.admin.selectOnChange&&x.admin.selectOnChange(...a))},[m,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(x.admin.AllCategory,((a,e)=>((0,l.wg)(),(0,l.iD)("option",{key:"option"+e,value:a},(0,n.zw)(`${""===a?"不分類":a}`),9,p)))),128))],32)])]),(0,l._)("div",u,[(0,l._)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=a=>x.addItem())}," 建立新的產品 ")])])]),(0,l._)("table",b,[(0,l._)("thead",null,[(0,l._)("tr",null,[_,g,(0,l._)("th",{width:"120",onClick:e[2]||(e[2]=a=>x.admin.itemSort("origin_price"))}," 原價 "),(0,l._)("th",{width:"120",onClick:e[3]||(e[3]=a=>x.admin.itemSort("price"))}," 售價 "),(0,l._)("th",{width:"120",onClick:e[4]||(e[4]=a=>x.admin.itemSort("rating"))}," 評等 "),(0,l._)("th",{width:"100",onClick:e[5]||(e[5]=a=>x.admin.itemSort("is_enabled"))}," 是否啟用 "),w])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(x.admin.tempProducts,((a,e)=>((0,l.wg)(),(0,l.iD)("tr",{key:"key"+e},[(0,l._)("td",f,(0,n.zw)(a.category),1),(0,l._)("td",y,(0,n.zw)(a.title),1),(0,l._)("td",h,(0,n.zw)(a.origin_price),1),(0,l._)("td",v,(0,n.zw)(a.price),1),(0,l._)("td",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(x.admin.tempProducts[e].rating,((a,e)=>((0,l.wg)(),(0,l.iD)("span",{key:"star"+e,class:"text-warning"},"☆")))),128))]),(0,l._)("td",null,[(0,l._)("span",{class:(0,n.C_)({"text-success":a.is_enabled,"text-danger":!a.is_enabled}),onClick:e=>x.admin.changeStatus(a)},(0,n.zw)(a.is_enabled?"啟用":"未啟用"),11,D)]),(0,l._)("td",null,[(0,l._)("div",k,[(0,l._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>x.editItem(a)}," 編輯 ",8,C),(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>x.status.swDelect(a)}," 刪除 ",8,U)])])])))),128))])]),(0,l.Wm)(z,{pagination:x.admin.pagination},null,8,["pagination"])])):(0,l.kq)("",!0),(0,l.Wm)(H)],64)}var M=t(4397),V=(t(7658),t(9242));const z={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},H={class:"modal-dialog modal-xl"},P={class:"modal-content border-0"},Y={id:"productModalLabel",class:"modal-title"},S={key:0,class:"fs-5"},E={key:1,class:"fs-5"},I=(0,l._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),q={class:"modal-body"},K={class:"row"},Z={class:"col-lg-4"},A={class:"mb-2"},$={class:"mb-3"},L=(0,l._)("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1),O=["src"],W=(0,l._)("label",{for:"floatingInput",class:"form-label"},"上傳檔案",-1),B={class:"d-flex mb-3"},F=(0,l._)("input",{type:"file",class:"form-control uploadEl",id:"floatingInput"},null,-1),N={key:0,class:"mb-3"},R=(0,l._)("p",{class:"fs-6 fw-bolder text-start mb-2"},"商品副圖網址",-1),j=["src"],G={class:"form-label w-100",for:"url"},J=["onUpdate:modelValue","placeholder"],Q={class:"col-lg-8"},T={class:"mb-3"},X=(0,l._)("label",{for:"title",class:"form-label"},"標題",-1),aa={class:"row"},ea={class:"mb-3 col-md-6"},ta=(0,l._)("label",{for:"category",class:"form-label"},"分類",-1),la={class:"mb-3 col-md-6"},na=(0,l._)("label",{for:"price",class:"form-label"},"單位",-1),ia={class:"row"},oa={class:"mb-3 col-md-6"},sa=(0,l._)("label",{for:"origin_price",class:"form-label"},"原價",-1),da={class:"mb-3 col-md-6"},ra=(0,l._)("label",{for:"price",class:"form-label"},"售價",-1),ca=(0,l._)("hr",null,null,-1),ma={class:"mb-3"},pa=(0,l._)("label",{for:"description",class:"form-label"},"產品描述",-1),ua={class:"mb-3"},ba=(0,l._)("label",{for:"content",class:"form-label"},"說明內容",-1),_a={class:"mb-3"},ga={class:"row align-items-center"},wa={class:"mb-3 mb-md-0 col-md-6 d-flex align-items-center"},fa=(0,l._)("label",{class:"form-label me-3 mb-0",for:"rating"},"評等",-1),ya=(0,l._)("option",{value:"",disabled:""},"選擇評等",-1),ha=["value"],va={class:"col-md-6"},Da={class:"form-check"},ka=(0,l._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Ca={class:"modal-footer"},Ua=(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function xa(a,e,t,i,o,s){return(0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("div",H,[(0,l._)("div",P,[(0,l._)("div",{class:(0,n.C_)(["modal-header text-white",{"bg-success":"add"===i.admin.operateMode,"bg-primary":"edit"===i.admin.operateMode}])},[(0,l._)("h5",Y,["add"===i.admin.operateMode?((0,l.wg)(),(0,l.iD)("span",S,"新增產品")):"edit"===i.admin.operateMode?((0,l.wg)(),(0,l.iD)("span",E,"修改產品")):(0,l.kq)("",!0)]),I],2),(0,l._)("div",q,[(0,l._)("div",K,[(0,l._)("div",Z,[(0,l._)("div",A,[(0,l._)("div",$,[L,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[0]||(e[0]=a=>i.admin.tempData.imageUrl=a)},null,512),[[V.nr,i.admin.tempData.imageUrl]])]),(0,l._)("img",{class:"img-fluid",src:i.admin.tempData.imageUrl,alt:""},null,8,O)]),W,(0,l._)("div",B,[F,(0,l._)("button",{type:"button",class:"btn btn-primary ms-2",onClick:e[1]||(e[1]=a=>i.admin.uploadFile())},"upload")]),Array.isArray(i.admin.tempData.imagesUrl)?((0,l.wg)(),(0,l.iD)("div",N,[R,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.admin.tempData.imagesUrl,((a,e)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:"img"+e},[(0,l._)("img",{class:"img-fluid",src:i.admin.tempData.imagesUrl[e],alt:""},null,8,j),(0,l._)("label",G,[(0,l.Uk)("副圖網址"+(0,n.zw)(`${e+1}`)+" ",1),(0,l.wy)((0,l._)("input",{type:"text",id:"url",class:"form-control mb-3","onUpdate:modelValue":a=>i.admin.tempData.imagesUrl[e]=a,placeholder:`輸入副圖網址${e+1}`},null,8,J),[[V.nr,i.admin.tempData.imagesUrl[e]]])])],64)))),128)),!i.admin.tempData.imagesUrl.length||i.admin.tempData.imagesUrl[i.admin.tempData.imagesUrl.length-1]?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-primary w-100 mb-3",onClick:e[2]||(e[2]=a=>i.admin.tempData.imagesUrl.push(""))},"新增")):(0,l.kq)("",!0),(0,l._)("button",{type:"button",class:"btn btn-outline-danger w-100",onClick:e[3]||(e[3]=a=>i.admin.tempData.imagesUrl.pop(""))},"刪除最後一個")])):(0,l.kq)("",!0)]),(0,l._)("div",Q,[(0,l._)("div",T,[X,(0,l.wy)((0,l._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=a=>i.admin.tempData.title=a)},null,512),[[V.nr,i.admin.tempData.title]])]),(0,l._)("div",aa,[(0,l._)("div",ea,[ta,(0,l.wy)((0,l._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[5]||(e[5]=a=>i.admin.tempData.category=a)},null,512),[[V.nr,i.admin.tempData.category]])]),(0,l._)("div",la,[na,(0,l.wy)((0,l._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[6]||(e[6]=a=>i.admin.tempData.unit=a)},null,512),[[V.nr,i.admin.tempData.unit]])])]),(0,l._)("div",ia,[(0,l._)("div",oa,[sa,(0,l.wy)((0,l._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[7]||(e[7]=a=>i.admin.tempData.origin_price=a)},null,512),[[V.nr,i.admin.tempData.origin_price,void 0,{number:!0}]])]),(0,l._)("div",da,[ra,(0,l.wy)((0,l._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[8]||(e[8]=a=>i.admin.tempData.price=a)},null,512),[[V.nr,i.admin.tempData.price,void 0,{number:!0}]])])]),ca,(0,l._)("div",ma,[pa,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=a=>i.admin.tempData.description=a)},"\n                ",512),[[V.nr,i.admin.tempData.description]])]),(0,l._)("div",ua,[ba,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[10]||(e[10]=a=>i.admin.tempData.content=a)},"\n                ",512),[[V.nr,i.admin.tempData.content]])]),(0,l._)("div",_a,[(0,l._)("div",ga,[(0,l._)("div",wa,[fa,(0,l.wy)((0,l._)("select",{class:"form-select border w-75",id:"rating","onUpdate:modelValue":e[11]||(e[11]=a=>i.admin.tempData.rating=a)},[ya,((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(5,((a,e)=>(0,l._)("option",{key:"option"+e,value:a},(0,n.zw)(`${a}`),9,ha))),64))],512),[[V.bM,i.admin.tempData.rating,void 0,{number:!0}]])]),(0,l._)("div",va,[(0,l._)("div",Da,[(0,l.wy)((0,l._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=a=>i.admin.tempData.is_enabled=a)},null,512),[[V.e8,i.admin.tempData.is_enabled]]),ka])])])])])])]),(0,l._)("div",Ca,[Ua,(0,l._)("button",{type:"button",class:(0,n.C_)(["btn btn-primary",{"bg-success":"add"===i.admin.operateMode,"bg-primary":"edit"===i.admin.operateMode}]),"data-bs-dismiss":"modal",onClick:e[13]||(e[13]=a=>i.admin.confirmProduct())}," 確認 ",2)])])])],512)}var Ma=t(9284),Va={setup(){const a=(0,Ma.Z)();return(0,l.ic)((()=>{a.uploadEl=document.querySelector(".uploadEl")})),{admin:a}}},za=t(89);const Ha=(0,za.Z)(Va,[["render",xa]]);var Pa=Ha;const Ya={class:"pagination"},Sa=(0,l._)("span",{"aria-hidden":"true"},"«",-1),Ea=[Sa],Ia=["onClick"],qa=(0,l._)("span",{"aria-hidden":"true"},"»",-1),Ka=[qa];function Za(a,e,t,i,o,s){return(0,l.wg)(),(0,l.iD)("ul",Ya,[(0,l._)("li",{class:(0,n.C_)(["page-item",{disabled:!i.pagination.has_pre}])},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,V.iM)((a=>i.admin.changePage(i.pagination.current_page-1)),["prevent"]))},Ea)],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.pagination?.total_pages,((a,e)=>((0,l.wg)(),(0,l.iD)("li",{key:"key"+a,class:"page-item"},[(0,l._)("a",{class:(0,n.C_)(["page-link",{active:i.pagination.current_page===a}]),href:"#",onClick:(0,V.iM)((e=>i.admin.changePage(a)),["prevent"])},(0,n.zw)(a),11,Ia)])))),128)),(0,l._)("li",{class:(0,n.C_)(["page-item",{disabled:!i.pagination.has_next}])},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,V.iM)((a=>i.admin.changePage(i.pagination.current_page+1)),["prevent"]))},Ka)],2)])}var Aa=t(4870),$a={setup(){const a=(0,Ma.Z)(),e=(0,Aa.iH)(a.pagination);return(0,l.YP)(a,(a=>{e.value=a.pagination}),{deep:!0}),{pagination:e,admin:a}}};const La=(0,za.Z)($a,[["render",Za]]);var Oa=La,Wa={components:{productModal:Pa,paginationComponent:Oa},props:["store"],setup(a){const e=a.store.admin,t=a.store.status,n=()=>{const a=new M.Z(document.getElementById("productModal"));a.show()},i=()=>{e.operateMode="",e.tempData={imagesUrl:[]},n(),e.operateMode="add"},o=a=>{e.operateMode="",e.tempData={},n(),e.operateMode="edit",e.tempData={...a}};return(0,l.bv)((()=>{e.checkStatus(),e.getAllCategory()})),(0,l.ic)((()=>{e.selectEl=document.querySelector(".selectEl")})),{admin:e,status:t,openModal:n,addItem:i,editItem:o}}};const Ba=(0,za.Z)(Wa,[["render",x]]);var Fa=Ba}}]);
//# sourceMappingURL=649.2d24f7e7.js.map